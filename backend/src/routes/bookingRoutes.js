import express from "express";
import { createBooking, getUserBookings, getScheduledBookings, getScheduledHistory, getBookingById, cancelBooking, getBookingStatus, startRide, completeRide, verifyPayment, acceptReturnOffer, startWaiting } from "../controllers/bookingController.js";
import { authenticate } from "../middleware/auth.js";

const router = express.Router();

// All routes require authentication
router.use(authenticate);

// Booking routes
router.post("/", createBooking);
router.get("/", getUserBookings);
router.get("/scheduled", getScheduledBookings);
router.get("/scheduled/history", getScheduledHistory);
router.get("/:id", getBookingById);
router.get("/:id/status", getBookingStatus);
router.put("/:id/cancel", cancelBooking);
router.put("/:id/start", startRide);
router.put("/:id/complete", completeRide);
router.put("/:id/verify-payment", verifyPayment);
router.put("/:id/accept-return", acceptReturnOffer);
router.put("/:id/start-waiting", startWaiting);

export default router;
